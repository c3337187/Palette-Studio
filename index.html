<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Woodmart Studio — превью профиля</title>
  <style>
    :root{
      --bg-base:#f6f4fb;
      --bg-card:#ffffff;
      --bg-muted:rgba(255,255,255,0.6);
      --text-strong:#2c2340;
      --text-muted:#6c6384;
      --border-color:rgba(50,36,80,0.12);
      --accent:#805dff;
      --accent-strong:#5c3dff;
      --radius-lg:20px;
      --radius-md:16px;
      --radius-sm:10px;
      --font-sans:"Inter", "Segoe UI", system-ui, -apple-system, sans-serif;
      --font-display:"Manrope", "Inter", system-ui, sans-serif;
    }
    *,*::before,*::after{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,var(--bg-base) 0%,#fff 80%);color:var(--text-strong);font-family:var(--font-sans);line-height:1.6;min-height:100vh;display:flex;flex-direction:column}
    a{text-decoration:none;color:inherit}
    .topbar{position:sticky;top:0;z-index:10;background:rgba(255,255,255,0.85);backdrop-filter:blur(14px);border-bottom:1px solid rgba(0,0,0,0.06)}
    .topbar .container{max-width:1280px;margin:0 auto;padding:14px 24px;display:flex;align-items:center;justify-content:space-between}
    .brand{font-weight:700;letter-spacing:0.08em;text-transform:uppercase;font-size:18px;color:color-mix(in srgb,var(--text-strong) 85%, white 15%)}
    .nav-links{display:flex;gap:10px;font-size:14px}
    .nav-link{padding:8px 14px;border-radius:999px;color:var(--text-muted);transition:background .2s,color .2s}
    .nav-link:hover{background:var(--bg-muted);color:var(--text-strong)}
    .nav-link.active{background:var(--accent);color:#fff;box-shadow:0 12px 28px rgba(88,63,200,0.24)}
    main{flex:1}
    .wrapper{max-width:1280px;margin:0 auto;padding:48px 24px 80px;display:flex;flex-direction:column;gap:32px}
    .hero{background:var(--bg-card);border-radius:var(--radius-lg);padding:32px;border:1px solid var(--border-color);box-shadow:0 24px 54px rgba(55,40,100,0.14);display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:28px;align-items:center}
    .hero h1{margin:0;font-family:var(--font-display);font-size:32px;line-height:1.25}
    .hero p{margin:12px 0 0;color:var(--text-muted)}
    .hero .cta{display:flex;gap:12px;flex-wrap:wrap;margin-top:24px}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:12px 18px;border-radius:var(--radius-sm);border:1px solid var(--border-color);background:#fff;color:var(--text-strong);font-weight:600;font-size:14px;cursor:pointer;transition:all .2s;font-family:var(--font-sans)}
    .btn.primary{background:var(--accent);color:#fff;border-color:var(--accent);box-shadow:0 14px 32px rgba(88,63,200,0.24)}
    .btn.primary:hover{background:var(--accent-strong)}
    .btn.secondary:hover{background:var(--bg-muted)}
    .section{display:flex;flex-direction:column;gap:18px}
    .section h2{margin:0;font-size:24px;font-family:var(--font-display)}
    .preview-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:18px}
    .preview-card{background:var(--bg-card);border-radius:var(--radius-lg);padding:22px;border:1px solid var(--border-color);box-shadow:0 22px 48px rgba(55,40,100,0.12);display:flex;flex-direction:column;gap:16px}
    .preview-card header{display:flex;justify-content:space-between;align-items:center}
    .preview-card header h3{margin:0;font-size:18px;font-family:var(--font-display)}
    .tag{padding:4px 10px;border-radius:999px;font-size:11px;font-weight:600;letter-spacing:0.06em;text-transform:uppercase;background:var(--bg-muted);color:var(--text-muted)}
    .header-preview,.footer-preview{padding:18px;border-radius:var(--radius-md);color:#fff;display:flex;justify-content:space-between;align-items:center}
    .header-preview nav{display:flex;gap:16px;font-size:13px}
    .hero-preview{border-radius:var(--radius-md);padding:24px;color:#fff;display:flex;flex-direction:column;gap:12px}
    .hero-preview button{align-self:flex-start;padding:10px 16px;border-radius:var(--radius-sm);border:none;font-weight:600;cursor:pointer}
    .info-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px}
    .info-item{border-radius:var(--radius-md);padding:16px;background:var(--bg-muted);display:flex;flex-direction:column;gap:6px;font-size:13px}
    .info-item strong{font-size:14px}
    .button-row{display:flex;gap:12px;flex-wrap:wrap}
    .button-row button{padding:10px 16px;border-radius:var(--radius-sm);border:none;font-weight:600;cursor:pointer}
    .link-preview{display:flex;flex-direction:column;gap:6px}
    .link-preview a{font-weight:600}
    .background-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px}
    .background-card{padding:14px;border-radius:var(--radius-md);border:1px solid rgba(0,0,0,0.06);display:flex;flex-direction:column;gap:6px;font-size:12px}
    .background-sample{height:42px;border-radius:12px;border:1px solid rgba(0,0,0,0.08)}
    footer{padding:24px;text-align:center;font-size:12px;color:var(--text-muted)}
    @media(max-width:720px){
      .wrapper{padding:36px 16px 64px}
      .hero{padding:24px}
    }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="container">
      <div class="brand">Palette Studio</div>
      <nav class="nav-links">
        <a class="nav-link active" href="index.html">Превью</a>
        <a class="nav-link" href="lab.html">Woodmart</a>
        <a class="nav-link" href="fonts.html">Документация</a>
      </nav>
    </div>
  </header>

  <main>
    <div class="wrapper">
      <section class="hero">
        <div>
          <h1>Woodmart Studio</h1>
          <p>Следите за активным профилем: все секции ниже используют его настройки. Переключайтесь и редактируйте конфигурацию во вкладке «Woodmart».</p>
          <div class="cta">
            <a class="btn primary" href="lab.html">Открыть редактор</a>
            <a class="btn secondary" href="fonts.html">Памятка и JSON</a>
          </div>
        </div>
        <div class="preview-card" style="margin:0">
          <header>
            <h3>Текущий профиль</h3>
            <span class="tag">Активный</span>
          </header>
          <div style="display:flex;flex-direction:column;gap:6px;font-size:13px;color:var(--text-muted)">
            <div><strong id="profileName">—</strong></div>
            <div>Основной цвет: <span id="primaryColor">—</span></div>
            <div>Secondary: <span id="secondaryColor">—</span></div>
            <div>Header: <span id="headerColor">—</span></div>
          </div>
        </div>
      </section>

      <section class="section">
        <h2>Макет</h2>
        <div class="preview-grid">
          <article class="preview-card">
            <header>
              <h3>Шапка и футер</h3>
              <span class="tag">Layout</span>
            </header>
            <div class="header-preview" id="previewHeader">
              <div>Woodmart</div>
              <nav><span>Каталог</span><span>Коллекции</span><span>Контакты</span></nav>
            </div>
            <div class="footer-preview" id="previewFooter">
              <span>© 2024 Woodmart Studio</span>
              <span>+7 (900) 000-00-00</span>
            </div>
          </article>
          <article class="preview-card">
            <header>
              <h3>Hero</h3>
              <span class="tag">Content</span>
            </header>
            <div class="hero-preview" id="previewHero">
              <span style="font-size:13px;letter-spacing:0.08em;text-transform:uppercase;opacity:0.75">Новая коллекция</span>
              <div id="heroTitle" style="font-size:28px;font-weight:700;line-height:1.2">Заголовок витрины</div>
              <p id="heroText" style="margin:0;font-size:14px;max-width:420px">Основной текст использует параметры Basic typography.</p>
              <button id="heroCta">Подробнее</button>
            </div>
          </article>
        </div>
      </section>

      <section class="section">
        <h2>Типографика</h2>
        <div class="info-grid" id="typographyInfo"></div>
      </section>

      <section class="section">
        <h2>Кнопки и ссылки</h2>
        <div class="preview-card">
          <header>
            <h3>UI элементы</h3>
            <span class="tag">UI</span>
          </header>
          <div class="button-row">
            <button id="previewDefault">Default</button>
            <button id="previewDefaultHover">Default hover</button>
            <button id="previewAccent">Accent</button>
            <button id="previewAccentHover">Accent hover</button>
          </div>
          <div class="link-preview">
            <span>Links preview:</span>
            <div>
              <a href="#" id="linkRegular">Ссылка</a>
              <span> · </span>
              <a href="#" id="linkHover">Наведение</a>
            </div>
          </div>
        </div>
      </section>

      <section class="section">
        <h2>Фоны страниц</h2>
        <div class="preview-card">
          <header>
            <h3>Backgrounds</h3>
            <span class="tag">Layout</span>
          </header>
          <div class="background-grid" id="backgroundGrid"></div>
        </div>
      </section>
    </div>
  </main>

  <footer>
    Настройки обновляются автоматически из редактора Woodmart. Экспорт готового JSON доступен во вкладке «Woodmart».
  </footer>

  <script src="palette-store.js"></script>
  <script>
    const store = WoodmartStore;
    const state = store.loadState();
    const active = store.getActiveProfile(state);
    const cfg = active.config;

    document.getElementById('profileName').textContent = active.name;
    document.getElementById('primaryColor').textContent = cfg.colors.primary;
    document.getElementById('secondaryColor').textContent = cfg.colors.secondary;
    document.getElementById('headerColor').textContent = cfg.header.color;

    const previewHeader = document.getElementById('previewHeader');
    const previewFooter = document.getElementById('previewFooter');
    const previewHero = document.getElementById('previewHero');
    const heroTitle = document.getElementById('heroTitle');
    const heroText = document.getElementById('heroText');
    const heroCta = document.getElementById('heroCta');
    const typographyInfo = document.getElementById('typographyInfo');
    const previewDefault = document.getElementById('previewDefault');
    const previewDefaultHover = document.getElementById('previewDefaultHover');
    const previewAccent = document.getElementById('previewAccent');
    const previewAccentHover = document.getElementById('previewAccentHover');
    const linkRegular = document.getElementById('linkRegular');
    const linkHover = document.getElementById('linkHover');
    const backgroundGrid = document.getElementById('backgroundGrid');

    previewHeader.style.background = cfg.header.color;
    previewHeader.style.fontFamily = `'${cfg.typography.header.fontFamily || cfg.typography.basic.fontFamily}', var(--font-sans)`;
    previewHeader.style.textTransform = (cfg.typography.header.textTransform || 'none').toLowerCase();
    previewHeader.style.fontSize = cfg.typography.header.fontSize || '14px';

    previewFooter.style.background = cfg.footer.color;
    previewFooter.style.fontFamily = `'${cfg.typography.basic.fontFamily}', var(--font-sans)`;
    previewFooter.style.color = cfg.typography.basic.color;

    previewHero.style.background = `linear-gradient(135deg, ${cfg.colors.secondary}, ${cfg.colors.primary})`;
    heroTitle.style.fontFamily = `'${cfg.typography.title.fontFamily}', var(--font-sans)`;
    heroTitle.style.color = cfg.typography.title.color;
    heroTitle.style.textTransform = (cfg.typography.title.textTransform || 'none').toLowerCase();
    heroText.style.fontFamily = `'${cfg.typography.basic.fontFamily}', var(--font-sans)`;
    heroText.style.fontSize = cfg.typography.basic.fontSize || '16px';
    heroText.style.color = cfg.typography.basic.color;
    heroCta.style.fontFamily = `'${cfg.buttons.default.fontFamily}', var(--font-sans)`;
    heroCta.style.background = cfg.buttons.default.background;
    heroCta.style.color = '#fff';
    heroCta.style.textTransform = (cfg.buttons.default.textTransform || 'none').toLowerCase();

    const typoList = [
      {title:'Basic', data:cfg.typography.basic},
      {title:'Titles', data:cfg.typography.title},
      {title:'Entities', data:cfg.typography.entities},
      {title:'Secondary', data:cfg.typography.secondary},
      {title:'Widget titles', data:cfg.typography.widget},
      {title:'Header', data:cfg.typography.header}
    ];
    typoList.forEach(item => {
      const card = document.createElement('div');
      card.className = 'info-item';
      const strong = document.createElement('strong');
      strong.textContent = item.title;
      card.appendChild(strong);
      Object.entries(item.data).forEach(([key,value]) => {
        if(!value){
          return;
        }
        const row = document.createElement('div');
        row.textContent = `${key}: ${value}`;
        card.appendChild(row);
      });
      typographyInfo.appendChild(card);
    });

    previewDefault.style.background = cfg.buttons.default.background;
    previewDefault.style.fontFamily = `'${cfg.buttons.default.fontFamily}', var(--font-sans)`;
    previewDefault.style.color = '#fff';
    previewDefault.style.textTransform = (cfg.buttons.default.textTransform || 'none').toLowerCase();

    previewDefaultHover.style.background = cfg.buttons.default.hoverBackground;
    previewDefaultHover.style.fontFamily = `'${cfg.buttons.default.fontFamily}', var(--font-sans)`;
    previewDefaultHover.style.color = '#fff';
    previewDefaultHover.style.textTransform = (cfg.buttons.default.textTransform || 'none').toLowerCase();

    previewAccent.style.background = cfg.buttons.accent.background;
    previewAccent.style.fontFamily = `'${cfg.buttons.accent.fontFamily}', var(--font-sans)`;
    previewAccent.style.color = '#fff';
    previewAccent.style.textTransform = (cfg.buttons.accent.textTransform || 'none').toLowerCase();

    previewAccentHover.style.background = cfg.buttons.accent.hoverBackground;
    previewAccentHover.style.fontFamily = `'${cfg.buttons.accent.fontFamily}', var(--font-sans)`;
    previewAccentHover.style.color = '#fff';
    previewAccentHover.style.textTransform = (cfg.buttons.accent.textTransform || 'none').toLowerCase();

    linkRegular.style.color = cfg.links.color.regular;
    linkRegular.style.textDecorationLine = 'underline';
    linkRegular.style.textDecorationStyle = cfg.links.underline.regular || 'solid';
    linkRegular.style.textDecorationColor = cfg.links.underlineColor.regular || cfg.links.color.regular;

    linkHover.style.color = cfg.links.color.hover;
    linkHover.style.textDecorationLine = 'underline';
    linkHover.style.textDecorationStyle = cfg.links.underline.hover || 'solid';
    linkHover.style.textDecorationColor = cfg.links.underlineColor.hover || cfg.links.color.hover;

    const backgrounds = [
      {title:'All pages', value:cfg.backgrounds.pages.all},
      {title:'Shop archive', value:cfg.backgrounds.shop.archive},
      {title:'Single product', value:cfg.backgrounds.shop.single},
      {title:'Blog archive', value:cfg.backgrounds.blog.archive},
      {title:'Single post', value:cfg.backgrounds.blog.single}
    ];
    backgrounds.forEach(bg => {
      const card = document.createElement('div');
      card.className = 'background-card';
      const sample = document.createElement('div');
      sample.className = 'background-sample';
      sample.style.background = bg.value;
      card.appendChild(sample);
      const title = document.createElement('div');
      title.textContent = bg.title;
      card.appendChild(title);
      const code = document.createElement('code');
      code.textContent = bg.value;
      card.appendChild(code);
      backgroundGrid.appendChild(card);
    });
  </script>
</body>
</html>
