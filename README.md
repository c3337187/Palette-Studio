# Palette Studio

Palette Studio — это набор статических страниц для быстрого подбора цветовой палитры и типографики. Инструмент состоит из демонстрационного стенда, лаборатории палитр и каталога шрифтов. Все изменения сохраняются в `localStorage` браузера и моментально синхронизируются между страницами.

## Структура проекта

| Страница      | Назначение |
|---------------|-----------|
| `index.html`  | Демонстрационный стенд. Показывает hero-блок, навигацию, список кнопок, карточки, формы, блок правила 60/30/10 и типографику с учётом активного профиля цветов и выбранных шрифтов. |
| `lab.html`    | Лаборатория палитр. Позволяет управлять профилями, редактировать базовые токены, настраивать alias-переменные, оценивать контрастность и экспортировать/импортировать конфигурации. |
| `fonts.html`  | Каталог шрифтов. Даёт быстрый доступ к популярным кириллическим гарнитурам Google Fonts, показывает пресеты пар и позволяет применять шрифты к заголовкам, основному тексту и UI-элементам. |
| `palette-generator.js` | JS-модуль и CLI-скрипт, который по основному цвету строит палитру 60/30/10, предлагает шрифтовую пару и возвращает результат в JSON. |

### Навигация и сохранение

* Верхнее меню на каждой странице ведёт к остальным разделам.
* Цветовые профили хранятся под ключом `palette-studio-profiles` в `localStorage`.
* Кнопка «Очистить профили» в лаборатории удаляет все сохранённые профили, оставляя активный и переименовывая его в `main`.
* Настройки шрифтов сохраняются под ключом `palette-studio-fonts`.
* Экспорт и импорт конфигураций доступны в лаборатории палитр: можно загрузить JSON-файл или вставить текстовую конфигурацию через кнопку «Вставить конфиг».

### Принципы подбора интерфейса

Palette Studio — ориентир для дизайна и фронтенда. После подбора цветов и гарнитур их можно скопировать и применить в любом проекте. Важно понимать несколько правил:

* Все значения указываются в HEX и применяются без «поблажек»: лаборатория не подменяет оттенки, не округляет и не повышает контраст автоматически. Что вы видите в предпросмотре, то же самое попадёт в экспорт и в `index.html`.
* Alias-переменные позволяют строить семантику поверх базовых токенов, но итоговые цвета всегда вычисляются из заданных значений.
* Шрифты подключаются через CSS-ссылки Google Fonts с поддержкой кириллицы. Страница шрифтов помогает подобрать сочетания, однако окончательный стек всегда формируется из выбранных семей.
* Контрастность — обязательный этап проверки. Утилита показывает коэффициенты, но выбор оттенков остаётся за дизайнером: если значение ниже нормы, нужно скорректировать палитру вручную.
* Соблюдайте правило 60-30-10: основной фон и крупные поверхности занимают около 60% визуального веса, вторичные блоки — 30%, акцентные элементы (CTA, бейджи) — 10%. На стенде для этого есть отдельная карточка-напоминание, а лаборатория показывает распределение прямо в предпросмотре.

### Генератор палитр 60/30/10

Palette Studio включает генератор, который помогает стартовать с одного основного цвета:

* **В лаборатории.** Панель «Генератор 60/30/10» принимает HEX-значение, предлагает название профиля и при желании сразу применяет подобранные шрифты. Полученный профиль добавляется к списку без перезаписи существующих записей.
* **Через CLI.** Скрипт `palette-generator.js` можно запустить из консоли:

  ```bash
  node palette-generator.js "#6B5B95"
  ```

  Ответ — JSON с ключами `primary`, `secondary`, `accent`, `background`, `neutral`, `card`, `text`, `buttonBg`, `buttonHover`, `headerBg` и блоком `fonts` (главный, заголовочный и UI-шрифты). Этот JSON удобно прикладывать к задачам или использовать как подсказку при подготовке итоговой конфигурации.

Генератор использует гармоничные оттенки и популярные пары шрифтов с поддержкой кириллицы. В лаборатории можно отредактировать любую предложенную переменную и сохранить её вместе с остальными профилями.

### Локальное хранение и структура данных

* `palette-studio-profiles` — объект формата:

  ```json
  {
    "activeId": "идентификатор активного профиля",
    "profiles": [
      {
        "id": "machine-friendly-id",
        "name": "Название профиля",
        "base": {"--bg": "#RRGGBB", "--text": "#RRGGBB", ...},
        "aliases": {
          "--surface-primary": {"mode": "base", "ref": "--bg"},
          "--text-muted": {"mode": "auto"},
          "--badge-accent": {"mode": "custom", "value": "#RRGGBB" }
        }
      }
    ]
  }
  ```

  При экспорте и импорте используется тот же формат. Импортированные профили добавляются к существующим: если `id` совпадает с уже сохранённым профилем, он обновляется, а при конфликте внутри одного импорта создаётся новый `id` и к названию добавляется пометка «(импорт)».

* `palette-studio-fonts` — объект с тремя ключами (`heading`, `text`, `ui`). Каждый ключ содержит метаданные шрифта: `id`, `family`, `stack`, `css` и, при наличии, `category`, `weights`, `tags`. Эти данные используются всеми страницами после подстановки.

### Контраст и читаемость

Карточка «Контраст» в лаборатории оценивает четыре ключевые пары цветов: основной текст, вторичный текст и оба состояния кнопок. Для каждой пары рассчитывается коэффициент контрастности по WCAG 2.1, после чего добавляется статус:

* **AAA** — соответствует уровню AAA (для обычного текста ≥ 7.0, для крупного ≥ 4.5).
* **AA** — соответствует уровню AA (≥ 4.5 для обычного текста, ≥ 3.0 для крупного).
* **Почти** — немного не дотягивает до стандарта: цель выводится в подсказке.
* **Ниже нормы** — контраст ниже допустимых значений.

Все показатели высчитываются напрямую из выбранных HEX-значений — без коррекции или усиления контраста. Автоматический режим `--text-muted` лишь мягко смешивает основной текст с фоном, не изменяя итоговый коэффициент ради соответствия стандарту. Если статус «Почти» или «Ниже нормы», оттенок нужно скорректировать вручную, чтобы достичь требуемого уровня WCAG.

## Переменные палитры

### Базовые токены

| Переменная | Назначение |
|------------|------------|
| `--bg` | Основной фон страницы. |
| `--text` | Главный цвет текста и контента. |
| `--accent1` | Мягкий акцент для подчёркивания элементов. |
| `--accent2` | Яркий акцент для hero-блоков и активных зон. |
| `--warm` | Тёплый дополнительный цвет, например для бейджей. |
| `--warm2` | Дополнительный тёплый фон, подходит для мягких подложек. |
| `--button` | Основной цвет интерактивных кнопок. |
| `--button-hover` | Цвет кнопок при наведении курсора. |
| `--neutral` | Нейтральный оттенок для границ и фонов. |
| `--card-bg` | Фон карточек и всплывающих блоков. |

### Alias-переменные

| Переменная | Назначение |
|------------|------------|
| `--surface-primary` | Главный фон интерфейса и страницы. |
| `--surface-card` | Фон карточек и модулей. |
| `--surface-muted` | Приглушённая поверхность для второстепенных блоков. |
| `--surface-hero` | Фон hero-блока и крупных CTA. |
| `--surface-accent` | Акцентная поверхность для выделения элементов. |
| `--text-strong` | Основной цвет текста. |
| `--text-muted` | Вторичный текст, рассчитывается автоматически или задаётся вручную. |
| `--border-subtle` | Мягкие границы и разделители. |
| `--action-primary` | Цвет основного действия (кнопки). |
| `--action-primary-hover` | Цвет кнопки при наведении. |
| `--badge-accent` | Цвет бейджей и меток. |

### Роли шрифтов

| Ключ | Где используется |
|------|------------------|
| `heading` | Заголовки на стенде и в лаборатории. |
| `text` | Основные текстовые блоки (`body`). |
| `ui` | Кнопки, элементы интерфейса и подписи. |

Каждая запись шрифта хранит поля:

```json
{
  "id": "manrope",
  "family": "Manrope",
  "stack": "'Manrope', sans-serif",
  "css": "https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700&display=swap&subset=cyrillic",
  "category": "sans-serif",
  "weights": [400, 600, 700],
  "tags": ["универсальный", "современный"]
}
```

## Формат конфигурации

Экспорт и импорт используют единый JSON. Его можно сохранить в репозитории, передать коллеге или сгенерировать с помощью нейросети. Один файл описывает текущий набор профилей и выбранные шрифты.

### Требования к JSON

* `activeId` — идентификатор профиля, который будет применён сразу после импорта. Значение должно совпадать с `id` одной из записей в `profiles`.
* `profiles` — массив объектов. Каждый объект обязан содержать:
  * `id` и `name` — уникальный машинный и человекочитаемый идентификаторы профиля.
  * `base` — все десять базовых токенов (`--bg`, `--text`, `--accent1`, `--accent2`, `--warm`, `--warm2`, `--button`, `--button-hover`, `--neutral`, `--card-bg`) в формате HEX `#RRGGBB`.
  * `aliases` — словарь alias-переменных. Для каждого alias нужно указать `mode` и либо `ref`, либо `value`:
    * `mode: "base"` — ссылка на токен из `base` через поле `ref`.
    * `mode: "custom"` — собственное значение в поле `value`.
    * `mode: "auto"` — автоматический расчёт (например, для `--text-muted`).
* `fonts` — объект с тремя ключами: `heading`, `text`, `ui`. У каждого ключа должен быть как минимум набор полей `id`, `family`, `stack`, `css` (ссылка на Google Fonts с параметром `subset=cyrillic`). Дополнительные поля (`category`, `weights`, `tags`) опциональны.

Импортированный JSON дополняет существующие данные: новые профили добавляются, совпадающие `id` обновляются, а активный профиль переключается на `activeId` из файла.

### Пример полного профиля

Ниже пример готового файла, который можно вставить в лабораторию. Он добавляет один профиль и набор шрифтов, которых достаточно для синхронизации всех страниц.

```json
{
  "activeId": "soft-light",
  "profiles": [
    {
      "id": "soft-light",
      "name": "Soft Light (Нейтральный старт)",
      "base": {
        "--bg": "#FAF8FB",
        "--text": "#3C2E40",
        "--accent1": "#B188C2",
        "--accent2": "#C9A3E6",
        "--warm": "#EBC5D8",
        "--warm2": "#F3DEE6",
        "--button": "#8C66AF",
        "--button-hover": "#A57FD0",
        "--neutral": "#E9E5EC",
        "--card-bg": "#FFFFFF"
      },
      "aliases": {
        "--surface-primary": { "mode": "base", "ref": "--bg" },
        "--surface-card": { "mode": "base", "ref": "--card-bg" },
        "--surface-muted": { "mode": "base", "ref": "--warm2" },
        "--surface-hero": { "mode": "base", "ref": "--accent2" },
        "--surface-accent": { "mode": "base", "ref": "--accent1" },
        "--text-strong": { "mode": "base", "ref": "--text" },
        "--text-muted": { "mode": "auto" },
        "--border-subtle": { "mode": "base", "ref": "--neutral" },
        "--action-primary": { "mode": "base", "ref": "--button" },
        "--action-primary-hover": { "mode": "base", "ref": "--button-hover" },
        "--badge-accent": { "mode": "base", "ref": "--warm" }
      }
    }
  ],
  "fonts": {
    "heading": {
      "id": "manrope",
      "family": "Manrope",
      "stack": "'Manrope', sans-serif",
      "css": "https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700&display=swap&subset=cyrillic"
    },
    "text": {
      "id": "inter",
      "family": "Inter",
      "stack": "'Inter', sans-serif",
      "css": "https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap&subset=cyrillic"
    },
    "ui": {
      "id": "manrope",
      "family": "Manrope",
      "stack": "'Manrope', sans-serif",
      "css": "https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700&display=swap&subset=cyrillic"
    }
  }
}
```

Такой JSON можно импортировать несколько раз подряд. Каждый набор профилей будет добавлен к уже сохранённым, а активным станет профиль из последнего файла (если его `id` присутствует).

Чтобы загрузить сразу несколько профилей, добавьте дополнительные объекты в массив `profiles`. Лаборатория сохранит их в указанном порядке.

## Быстрый старт

1. Откройте `index.html` для просмотра текущего профиля.
2. Перейдите в `lab.html`, чтобы настроить цвета, экспортировать или импортировать конфигурацию.
3. Используйте `fonts.html` для подбора шрифтов и популярных комбинаций.

Проект не требует сборки: достаточно открыть файлы в браузере или разместить их на статическом хостинге.
